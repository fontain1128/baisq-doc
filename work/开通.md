#开通权限 #

> **修改历史**
> | 版本号   | 变更日期       | 变更内容 | 变更人  |  批准  |
> | :---- | :--------- | :--- | :--: | :--: |
> | V0.01 | 2017-10-18 | 创建   | 柏世强  |      |

----------
> **说明**
> 所有接口均采用JSON格式（UTF-8）交换数据。接口描述中<>（尖括号）表示占位符，需要替换为真实内容。查询采用采用不定数目的大写字母X表示。
> ``<HOST>``：服务的ip地址或者域名
> ``<PORT>``：端口


[TOC]



##1、查询菜单

###URL
> GET
> http://<HOST>:<PORT>/menu/list

----------


###返回值

```json
{
	"code": "0000",
	"msg":"操作成功",
	"datas":[
		{
			"id":1,
			"name":"菜单名称",
			"appName":"所属应用名称",
			"isAuth":false
		},
		{
			"id":2,
			"name":"菜单名称",
			"appName":"所属应用名称",
			"isAuth":false
		}
	]
}
```
####返回值说明
>| 参数   | 类型     | 描述   | 说明                                    |
>| :--- | ------ | :--- | :------------------------------------ |
>| code | String | 状态码  | 0000-操作成功;1004-账号已经存在;[详见状态码说明](#状态码) |
>| msg  | String | 信息说明 |                                       |
>| id| int | 主键  |  |
>| name| String | 菜单名称 |  |
>| appName| String | 所属应用名称 |  |
>| isAuth| boolean| 是否已经授权 |  |
---

##2、开通菜单

###URL
> POST
> http://<HOST>:<PORT>/operation/company/authorize
----------
###请求体

```json
[
	{
		"corpId": "1",
		"menuId":[2,3,4],
		"type":""
	},
	{
		"corpId": "2",
		"menuId":[2,3,4],
		"type":""
	}
]
```
####请求体说明
>| 参数   | 类型     | 描述   | 说明                                    |
>| :--- | ------ | :--- | :------------------------------------ |
>| corpId| String | 企业Id  | 不可为空 |
>| menuId| 数组| 开通菜单Id数组 | 不可为空                                      |
>| type| String| 开通类型  | 可为空，"01":"开票"，"02":"受票":"03":"自定义" |
----------

###返回值

```json
{
	"code": "0000",
	"msg":"操作成功"
}
```
####返回值说明
>| 参数   | 类型     | 描述   | 说明                                    |
>| :--- | ------ | :--- | :------------------------------------ |
>| code | String | 状态码  | 0000-操作成功;1004-账号已经存在;[详见状态码说明](#状态码) |
>| msg  | String | 信息说明 |    |
---

##3、piaoeda开通

###URL
> POST
> http://<HOST>:<PORT>/invoiceclient-web/privateApi/operation/corp/author
----------
###请求体

```json
[
	{
		"corpId": "1",
		"menuId":[2,3,4],
		"type":""
	},
	{
		"corpId": "2",
		"menuId":[2,3,4],
		"type":""
	}
]
```
####请求体说明
>| 参数   | 类型     | 描述   | 说明                                    |
>| :--- | ------ | :--- | :------------------------------------ |
>| corpId| String | 企业Id  | 不可为空 |
>| menuId| 数组| 开通菜单Id数组 | 不可为空                                      |
>| type| String| 开通类型  | 可为空，"01":"开票"，"02":"受票":"03":"自定义" |
----------

###返回值

```json
{
	"code": "0000",
	"msg":"操作成功"
}
```


##附录

###状态码
>| 状态码  | 说明         |
>| :--- | ---------- |
>| 0000 | 操作成功       |
>| 1001 | 数据不合法，传入参数 |
>| 1002 | 数据不存在      |
>| 3001 | 发票已经报销     |
>| 3002 | 发票解析出错     |
>| 3003 | 发票查验不合法    |
>| 3004 | 发票状态不正确    |
>| 9999 | 未知错误       |


